"use strict";(self.webpackChunkdocudesk_docs=self.webpackChunkdocudesk_docs||[]).push([[826],{1712:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"api/anonymization-logs","title":"Anonymization Logs","description":"DocuDesk provides comprehensive anonymization capabilities to help you protect personal data in your documents. This page explains how anonymization logs work and how they can help you maintain GDPR compliance.","source":"@site/docs/api/anonymization-logs.md","sourceDirName":"api","slug":"/api/anonymization-logs","permalink":"/docs/api/anonymization-logs","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/docudesk/tree/main/website/docs/api/anonymization-logs.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Anonymization Logs"},"sidebar":"tutorialSidebar","previous":{"title":"Document Reports","permalink":"/docs/api/document-reports"},"next":{"title":"Entity Recognition Integration","permalink":"/docs/api/presidio-integration"}}');var t=i(4848),s=i(8453);const d={sidebar_position:6,title:"Anonymization Logs"},a="Anonymization Logs",r={},l=[{value:"Overview",id:"overview",level:2},{value:"Anonymization Log Object",id:"anonymization-log-object",level:2},{value:"Key Properties",id:"key-properties",level:3},{value:"Anonymization Process",id:"anonymization-process",level:2},{value:"Entity Types",id:"entity-types",level:2},{value:"Presidio Integration",id:"presidio-integration",level:2},{value:"De-anonymization",id:"de-anonymization",level:2},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"List Anonymization Logs",id:"list-anonymization-logs",level:3},{value:"Create Anonymization Log",id:"create-anonymization-log",level:3},{value:"Get Anonymization Log",id:"get-anonymization-log",level:3},{value:"Update Anonymization Log",id:"update-anonymization-log",level:3},{value:"Get Latest Anonymization Log for Node",id:"get-latest-anonymization-log-for-node",level:3},{value:"De-anonymize Document",id:"de-anonymize-document",level:3},{value:"Examples",id:"examples",level:2},{value:"Anonymizing a Document",id:"anonymizing-a-document",level:3},{value:"De-anonymizing a Document",id:"de-anonymizing-a-document",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Integration with Document Reports",id:"integration-with-document-reports",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"anonymization-logs",children:"Anonymization Logs"})}),"\n",(0,t.jsx)(e.p,{children:"DocuDesk provides comprehensive anonymization capabilities to help you protect personal data in your documents. This page explains how anonymization logs work and how they can help you maintain GDPR compliance."}),"\n",(0,t.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(e.p,{children:"The Anonymization Logs system in DocuDesk enables you to:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Track all anonymization operations performed on documents"}),"\n",(0,t.jsx)(e.li,{children:"Store detailed information about detected personal data"}),"\n",(0,t.jsx)(e.li,{children:"Maintain a record of text replacements for potential de-anonymization"}),"\n",(0,t.jsx)(e.li,{children:"Ensure GDPR compliance through proper documentation"}),"\n",(0,t.jsx)(e.li,{children:"Generate audit trails for privacy-related actions"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"anonymization-log-object",children:"Anonymization Log Object"}),"\n",(0,t.jsxs)(e.p,{children:["The ",(0,t.jsx)(e.code,{children:"AnonymizationLog"})," object is the core component for tracking document anonymization. It contains detailed information about the anonymization process, including the original text, anonymized text, and a secure key for de-anonymization."]}),"\n",(0,t.jsx)(e.h3,{id:"key-properties",children:"Key Properties"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Property"}),(0,t.jsx)(e.th,{children:"Type"}),(0,t.jsx)(e.th,{children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"id"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Unique identifier for the log"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"node_id"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Nextcloud node ID of the original document"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"file_hash"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Hash of the file content"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"status"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Status of the anonymization operation"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"anonymization_key"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Key used to de-anonymize the document (encrypted)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"original_text"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Original text of the document (stored securely)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"anonymized_text"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Anonymized text of the document"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"entity_replacements"}),(0,t.jsx)(e.td,{children:"array"}),(0,t.jsx)(e.td,{children:"List of entity replacements made during anonymization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"entities_found"}),(0,t.jsx)(e.td,{children:"array"}),(0,t.jsx)(e.td,{children:"List of entities found during anonymization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"output_node_id"}),(0,t.jsx)(e.td,{children:"string"}),(0,t.jsx)(e.td,{children:"Nextcloud node ID of the anonymized document"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"created_at"}),(0,t.jsx)(e.td,{children:"date-time"}),(0,t.jsx)(e.td,{children:"When the log was created"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"updated_at"}),(0,t.jsx)(e.td,{children:"date-time"}),(0,t.jsx)(e.td,{children:"When the log was last updated"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"anonymization-process",children:"Anonymization Process"}),"\n",(0,t.jsx)(e.p,{children:"When a document is submitted for anonymization, DocuDesk follows these steps:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Document Analysis"}),": The document is analyzed to detect personal data"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Entity Detection"}),": Personal data entities are identified and categorized"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Replacement Generation"}),": Replacement text is generated for each entity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Text Replacement"}),": The original text is replaced with anonymized text"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Key Generation"}),": A secure key is generated for potential de-anonymization"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Log Creation"}),": An anonymization log is created with all relevant information"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Output Generation"}),": An anonymized document is generated"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"entity-types",children:"Entity Types"}),"\n",(0,t.jsx)(e.p,{children:"DocuDesk can detect and anonymize various types of personal data entities:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"PERSON"}),": Names of individuals"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"LOCATION"}),": Physical locations (cities, countries, addresses)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ORGANIZATION"}),": Names of organizations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"DATE"}),": Dates that could identify individuals"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ID"}),": Identification numbers (passport, SSN, etc.)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"EMAIL"}),": Email addresses"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"PHONE"}),": Phone numbers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ADDRESS"}),": Physical addresses"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"FINANCIAL"}),": Financial information (bank accounts, credit cards, etc.)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"MEDICAL"}),": Medical information"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"OTHER"}),": Other types of personal data"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"presidio-integration",children:"Presidio Integration"}),"\n",(0,t.jsx)(e.p,{children:"DocuDesk integrates with Microsoft Presidio for entity detection and anonymization. The response from Presidio is processed and stored in the anonymization log. Here's an example of a Presidio response:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n    "original_text": "Mijn naam is Jan de Vries, mijn BSN is 123456789 en ik woon in Amsterdam.",\n    "anonymized_text": "Mijn naam is [PERSOON], mijn [PERSOON] is 123456789 en ik woon in [LOCATIE].",\n    "entities_found": [\n        {\n            "entity_type": "PERSON",\n            "text": "Jan de Vries",\n            "score": 0.9999995231628418\n        },\n        {\n            "entity_type": "LOCATION",\n            "text": "Amsterdam",\n            "score": 0.9999994039535522\n        },\n        {\n            "entity_type": "PERSON",\n            "text": "BSN",\n            "score": 0.85\n        }\n    ]\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["This response is transformed into the ",(0,t.jsx)(e.code,{children:"AnonymizationLog"})," object, with additional information such as:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Unique identifiers for each replacement"}),"\n",(0,t.jsx)(e.li,{children:"Positions of entities in the document"}),"\n",(0,t.jsx)(e.li,{children:"A secure key for de-anonymization"}),"\n",(0,t.jsx)(e.li,{children:"Metadata about the document and operation"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"de-anonymization",children:"De-anonymization"}),"\n",(0,t.jsx)(e.p,{children:"DocuDesk supports de-anonymization of documents using the anonymization key. This feature is useful in scenarios where:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"The original document is needed for legal proceedings"}),"\n",(0,t.jsx)(e.li,{children:"The anonymization was too aggressive and removed non-personal data"}),"\n",(0,t.jsx)(e.li,{children:"The document needs to be shared with authorized parties who require the full information"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"De-anonymization is a secure process that requires:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"The anonymized document (identified by its node ID)"}),"\n",(0,t.jsx)(e.li,{children:"The anonymization key (which is encrypted and stored securely)"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,t.jsx)(e.p,{children:"DocuDesk provides the following API endpoints for managing anonymization logs:"}),"\n",(0,t.jsx)(e.h3,{id:"list-anonymization-logs",children:"List Anonymization Logs"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"GET /apps/docudesk/api/v1/anonymization/logs\n"})}),"\n",(0,t.jsx)(e.p,{children:"Returns a list of anonymization logs. You can filter the logs by:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"node_id"}),": Filter logs by Nextcloud node ID"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"status"}),": Filter logs by status"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"create-anonymization-log",children:"Create Anonymization Log"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"POST /apps/docudesk/api/v1/anonymization/logs\n"})}),"\n",(0,t.jsx)(e.p,{children:"Creates a new anonymization log. You need to specify:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"node_id"}),": Nextcloud node ID of the document to anonymize"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"file_name"}),": Name of the document"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"confidence_threshold"}),": (Optional) Confidence threshold for entity detection"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"get-anonymization-log",children:"Get Anonymization Log"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"GET /apps/docudesk/api/v1/anonymization/logs/{logId}\n"})}),"\n",(0,t.jsx)(e.p,{children:"Returns a specific anonymization log by ID."}),"\n",(0,t.jsx)(e.h3,{id:"update-anonymization-log",children:"Update Anonymization Log"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"PUT /apps/docudesk/api/v1/anonymization/logs/{logId}\n"})}),"\n",(0,t.jsx)(e.p,{children:"Updates a specific anonymization log."}),"\n",(0,t.jsx)(e.h3,{id:"get-latest-anonymization-log-for-node",children:"Get Latest Anonymization Log for Node"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"GET /apps/docudesk/api/v1/anonymization/logs/node/{nodeId}\n"})}),"\n",(0,t.jsx)(e.p,{children:"Returns the latest anonymization log for a specific Nextcloud node."}),"\n",(0,t.jsx)(e.h3,{id:"de-anonymize-document",children:"De-anonymize Document"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"POST /apps/docudesk/api/v1/anonymization/deanonymize\n"})}),"\n",(0,t.jsx)(e.p,{children:"De-anonymizes a document using the anonymization key."}),"\n",(0,t.jsx)(e.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(e.h3,{id:"anonymizing-a-document",children:"Anonymizing a Document"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"// Create a new anonymization log\n$logData = [\n    'node_id' => '12345',\n    'file_name' => 'sensitive-document.pdf',\n    'confidence_threshold' => 0.7\n];\n\n$response = $client->post('/apps/docudesk/api/v1/anonymization/logs', [\n    'json' => $logData\n]);\n\n$log = json_decode($response->getBody(), true);\n$logId = $log['id'];\n\n// Check anonymization status\n$response = $client->get('/apps/docudesk/api/v1/anonymization/logs/' . $logId);\n$log = json_decode($response->getBody(), true);\n\nif ($log['status'] === 'completed') {\n    // Get the anonymized document\n    $anonymizedNodeId = $log['output_node_id'];\n    \n    // Store the anonymization key securely\n    $anonymizationKey = $log['anonymization_key'];\n    \n    // Check anonymization results\n    $totalEntitiesFound = $log['total_entities_found'];\n    $totalEntitiesReplaced = $log['total_entities_replaced'];\n    \n    echo \"Anonymization completed: Found $totalEntitiesFound entities, replaced $totalEntitiesReplaced entities.\";\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"de-anonymizing-a-document",children:"De-anonymizing a Document"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"// De-anonymize a document\n$deanonymizeData = [\n    'anonymized_node_id' => '67890',\n    'anonymization_key' => 'secure-key-retrieved-from-storage'\n];\n\n$response = $client->post('/apps/docudesk/api/v1/anonymization/deanonymize', [\n    'json' => $deanonymizeData\n]);\n\n$result = json_decode($response->getBody(), true);\n\nif ($result['success']) {\n    // Get the de-anonymized document\n    $originalNodeId = $result['original_node_id'];\n    echo \"Document successfully de-anonymized. Original document ID: $originalNodeId\";\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Secure Key Storage"}),": Store anonymization keys securely, preferably in a separate system from the anonymized documents"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Regular Audits"}),": Regularly audit anonymization logs to ensure personal data is being properly protected"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Confidence Threshold"}),": Adjust the confidence threshold based on your needs (higher for more precision, lower for more coverage)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Access Control"}),": Restrict access to de-anonymization functionality to authorized users only"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Retention Policy"}),": Implement a retention policy for anonymization logs in line with your GDPR compliance requirements"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"integration-with-document-reports",children:"Integration with Document Reports"}),"\n",(0,t.jsx)(e.p,{children:"The anonymization logs system integrates with DocuDesk's document reports:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Anonymization results are included in document reports"}),"\n",(0,t.jsx)(e.li,{children:"Document reports can trigger anonymization operations"}),"\n",(0,t.jsx)(e.li,{children:"Anonymization logs provide detailed information for privacy compliance reporting"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["For more information on document reports, see the ",(0,t.jsx)(e.a,{href:"/docs/api/document-reports",children:"Document Reports"})," documentation."]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>a});var o=i(6540);const t={},s=o.createContext(t);function d(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:d(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);